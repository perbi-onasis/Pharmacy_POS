<!doctype html>
<html lang="en" dir="ltr" xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Pharma Invent+</title>

    <link href="https://fonts.googleapis.com/css2?family=Jost:wght@400;500;600;700&display=swap" rel="stylesheet">

    <!-- inject:css-->

    <link rel="stylesheet" href="assets/vendor_assets/css/bootstrap/bootstrap.css">

    <link rel="stylesheet" href="assets/vendor_assets/css/daterangepicker.css">

    <link rel="stylesheet" href="assets/vendor_assets/css/fontawesome.css">

    <link rel="stylesheet" href="assets/vendor_assets/css/footable.standalone.min.css">

    <link rel="stylesheet" href="assets/vendor_assets/css/fullcalendar@5.2.0.css">

    <link rel="stylesheet" href="assets/vendor_assets/css/jquery-jvectormap-2.0.5.css">

    <link rel="stylesheet" href="assets/vendor_assets/css/jquery.mCustomScrollbar.min.css">

    <link rel="stylesheet" href="assets/vendor_assets/css/leaflet.css">

    <link rel="stylesheet" href="assets/vendor_assets/css/line-awesome.min.css">

    <link rel="stylesheet" href="assets/vendor_assets/css/magnific-popup.css">

    <link rel="stylesheet" href="assets/vendor_assets/css/MarkerCluster.css">

    <link rel="stylesheet" href="assets/vendor_assets/css/MarkerCluster.Default.css">

    <link rel="stylesheet" href="assets/vendor_assets/css/select2.min.css">

    <link rel="stylesheet" href="assets/vendor_assets/css/slick.css">

    <link rel="stylesheet" href="assets/vendor_assets/css/star-rating-svg.css">

    <link rel="stylesheet" href="assets/vendor_assets/css/trumbowyg.min.css">

    <link rel="stylesheet" href="/assets/vendor_assets/css/wickedpicker.min.css">

    <link rel="stylesheet" href="/style/style.css">

    <!-- endinject -->

    <link rel="icon" type="image/png" sizes="16x16" href="img/favicon.png">

    <!-- Fonts -->
    <link rel="stylesheet" href="https://unicons.iconscout.com/release/v4.0.0/css/line.css">
    <style>
        tr.even {
            background-color: #F8F9FB;
            border-radius: 10px;
        }

        tr.odd {
            background-color: white; /* Set the background color for odd rows */
        }
    </style>
</head>

<body class="layout-light side-menu">
<div class="mobile-search">
    <form action="/" class="search-form">
        <img src="img/svg/search.svg" alt="search" class="svg">
        <input class="form-control me-sm-2 box-shadow-none" type="search" placeholder="Search..." aria-label="Search">
    </form>
</div>
<div class="mobile-author-actions"></div>
<header class="header-top">
    <nav class="navbar navbar-light">
        <div class="navbar-left">
            <div class="logo-area">
                <a class="navbar-brand" href="dash.html">
                    <img class="dark" src="img/logo-dark.png" alt="logo">
                    <img class="light" src="img/logo-white.png" alt="logo">
                </a>
                <a href="#" class="sidebar-toggle">
                    <img class="svg" src="img/svg/align-center-alt.svg" alt="img"></a>
            </div>
            <!--            <div class="top-menu">-->

            <!--            &lt;!&ndash;               &ndash;&gt;-->

            <!--            </div>-->
        </div>
        <!-- ends: navbar-left -->
        <div class="navbar-right">
            <ul class="navbar-right__menu">
                <li class="nav-search">
                    <a href="#" class="search-toggle">
                        <i class="uil uil-search"></i>
                        <i class="uil uil-times"></i>
                    </a>
                    <form action="/" class="search-form-topMenu">
                        <span class="search-icon uil uil-search"></span>
                        <input class="form-control me-sm-2 box-shadow-none" type="search" placeholder="Search..." aria-label="Search">
                    </form>
                </li>


                <!-- ends: .nav-flag-select -->
                <li class="nav-author">
                    <div class="dropdown-custom">
                        <a href="javascript:;" class="nav-item-toggle"><img src="img/author-nav.jpg" alt="" class="rounded-circle">
                            <span class="nav-item__title" th:text="${name}"><i class="las la-angle-down nav-item__arrow"></i></span>
                        </a>
                        <div class="dropdown-parent-wrapper">
                            <div class="dropdown-wrapper">
                                <div class="nav-author__info">
                                    <div class="author-img">
                                        <img src="img/author-nav.jpg" alt="" class="rounded-circle">
                                    </div>
                                    <div>
                                        <h6 th:text="${name}"></h6>
                                        <span th:text="${pharmacyName}"></span>
                                    </div>
                                </div>
                                <div class="nav-author__options">
                                    <ul>
                                        <!--<li>
                                            <a href="">
                                                <i class="uil uil-setting"></i>
                                                Settings</a>
                                        </li>-->
                                        <!--<li>
                                            <a href="">
                                                <i class="uil uil-bell"></i> Help</a>
                                        </li>-->
                                    </ul>
                                    <a href="" class="nav-author__signout">
                                        <i class="uil uil-sign-out-alt"></i> Sign Out</a>
                                </div>
                            </div>
                            <!-- ends: .dropdown-wrapper -->
                        </div>
                    </div>
                </li>
                <!-- ends: .nav-author -->
            </ul>
            <!-- ends: .navbar-right__menu -->
            <div class="navbar-right__mobileAction d-md-none">
                <a href="#" class="btn-search">
                    <img src="img/svg/search.svg" alt="search" class="svg feather-search">
                    <img src="img/svg/x.svg" alt="x" class="svg feather-x"></a>
                <a href="#" class="btn-author-action">
                    <img class="svg" src="img/svg/more-vertical.svg" alt="more-vertical">
                </a>
            </div>
        </div>
        <!-- ends: .navbar-right -->
    </nav>
</header>

<!--  Beginning of Main Content-->
<main class="main-content">

    <div class="sidebar-wrapper">
        <div class="sidebar sidebar-collapse" id="sidebar" >
            <div class="sidebar__menu-group">
                <ul class="sidebar_nav has-child open">
                    <li>
                        <a href="dash.html" class="active">
                            <span class="nav-icon uil uil-create-dashboard"></span>
                            <span class="menu-text">Dashboard</span>
                        </a>
                    </li>
                    <li>
                        <a href="pos.html" class="">
                            <span class="nav-icon uil uil-window-section"></span>
                            <span class="menu-text">Point Of Sale</span>
                        </a>
                    </li>
                    <li>
                        <a href="stocks.html" class="">
                            <span class="nav-icon uil uil-arrow-growth"></span>
                            <span class="menu-text">Stock Management</span>
                        </a>
                    </li>
<!--                    <li>-->
<!--                        <a href="reports.html" class="">-->
<!--                            <span class="nav-icon uil uil-arrow-growth"></span>-->
<!--                            <span class="menu-text">Financial Reports</span>-->
<!--                        </a>-->
<!--                    </li>-->
                    <!--<li class="">
                        <a href="settings.html">
                            <span class="nav-icon uil "></span>
                            <span class="menu-text">Settings</span>
                        </a>
                    </li>-->
                    <li class="">
                        <a th:href="*{login}">
                            <span class="nav-icon uil uil-sign-out-alt"></span>
                            <span class="menu-text">Sign Out</span>
                        </a>
                    </li>
                </ul>
            </div>
        </div>
    </div>

    <!------Main Content------>
    <div class="contents">

        <div class="container-fluid">
            <div class="row">
                <div class="col-lg-12">

                    <div class="breadcrumb-main">
                        <h4 class="text-capitalize breadcrumb-title">Products</h4>
                        <div class="breadcrumb-action justify-content-center flex-wrap">
                            <nav aria-label="breadcrumb">
                                <ol class="breadcrumb">
                                    <li class="breadcrumb-item"><a href="#"><i class="uil uil-estate"></i>Products</a></li>
                                </ol>
                            </nav>
                        </div>
                    </div>

                </div>
            </div>
            <div class="row">
                <div class="col-12 mb-10">
                    <div class="col-3">
                        <div class="btn-group dm-button-group btn-group-normal nav" role="tablist">
                            <a class="btn btn-sm btn-outline-light color-light nav-link active " id="posSection-tab" data-bs-toggle="tab" href="#posSection" role="tab" aria-selected="false">Point of Sale</a>
                            <a class="btn btn-sm btn-outline-light color-light nav-link" id="posTransactions-tab" data-bs-toggle="tab" href="#posTransactions" role="tab" aria-selected="true">Transactions</a>
                        </div>
                    </div>
                </div>

               <div class="tab-content">
                   <!----POS Section------>
                   <div class="row pos tab-pane fade active show" id="posSection" role="tabpanel" aria-labelledby="posSection-tab" >
                       <div class="row col-12">
                           <!---  Products Table  -->
                           <div class="col-8 mb-30">
                               <div class="support-ticket-system support-ticket-system--search">

                                   <div class="breadcrumb-main m-0 breadcrumb-main--table justify-content-sm-between ">
                                       <div class=" d-flex flex-wrap justify-content-center breadcrumb-main__wrapper">
                                           <div class="d-flex align-items-center ticket__title justify-content-center me-md-25 mb-md-0 mb-20">
                                               <h4 class="text-capitalize fw-500 breadcrumb-title">Products Table</h4>
                                           </div>
                                       </div>
                                       <div class="action-btn">
                                           <!--<a href="#" class="btn btn-primary">
                                               Export
                                               <i class="las la-angle-down"></i>
                                           </a>-->
                                       </div>
                                   </div>

                                   <div class="support-form datatable-support-form d-flex justify-content-xxl-between justify-content-center align-items-center flex-wrap">
                                       <div class="support-form__search">
                                           <div class="support-order-search">
                                               <form action="/" class="support-order-search__form">
                                                   <img src="img/svg/search.svg" alt="search" class="svg">
                                                   <input id="searchInput" class="form-control border-0 box-shadow-none" type="search" placeholder="Search" aria-label="Search">
                                               </form>
                                           </div>
                                       </div>
                                   </div>
                                   <div class="userDatatable userDatatable--ticket userDatatable--ticket--2 mt-1">
                                       <div class="table-responsive">
                                           <table class="table mb-0 table-borderless">
                                               <thead>
                                               <tr class="userDatatable-header">
                                                   <th>
                                                       <span class="userDatatable-title">ID</span>
                                                   </th>
                                                   <th>
                                                       <span class="userDatatable-title">Product Name</span>
                                                   </th>
                                                   <th>
                                                       <span class="userDatatable-title">Quantity</span>
                                                   </th>
                                                   <th>
                                                       <span class="userDatatable-title">Price - Ghs</span>
                                                   </th>
                                                   <th>
                                                       <span class="userDatatable-title">Category</span>
                                                   </th>
                                                   <th>
                                                       <span class="userDatatable-title">Action</span>
                                                   </th>
                                               </tr>
                                               </thead>
                                               <tbody id="posProductTableBody">

                                               <!--<tr th:each="product : ${products}" onclick="addToCart('click', '${product.name}', ${product.price})">
                                               <td>#01</td>
                                               <td>
                                                   <div class="d-flex">
                                                       <div class="userDatatable-inline-title">
                                                           <a href="#" class="text-dark fw-500">
                                                               <h6 th:text="${product.name}">Product name</h6>
                                                           </a>
                                                       </div>
                                                   </div>
                                               </td>
                                               <td>
                                                   <div class="userDatatable-content&#45;&#45;subject" th:text="${product.quantity}">
                                                       243
                                                   </div>
                                               </td>
                                               <td>
                                                   <div class="userDatatable-content&#45;&#45;subject" th:text="${product.price}">
                                                 3.00
                                              </div>
                                           </td>
                                           <td>
                                              <div class="userDatatable-content&#45;&#45;priority">
                                                   Pain Killer
                                   </div>
                                   </td>
                                   <td>
                                       <a href="#" class="edit">
                                           Add
                                       </a>
                                   </td>
                                   </tr>
       -->
                                               </tbody>
                                           </table>
                                       </div>
                                       <div class="d-flex justify-content-end pt-30">

                                           <nav class="dm-page ">
                                               <ul class="dm-pagination d-flex">
                                                   <li class="dm-pagination__item">
                                                       <a href="#" class="dm-pagination__link pagination-control"><span class="la la-angle-left"></span></a>
                                                       <a href="#" class="dm-pagination__link"><span class="page-number">1</span></a>
                                                       <a href="#" class="dm-pagination__link active"><span class="page-number">2</span></a>
                                                       <a href="#" class="dm-pagination__link"><span class="page-number">3</span></a>
                                                       <a href="#" class="dm-pagination__link pagination-control"><span class="page-number">...</span></a>
                                                       <a href="#" class="dm-pagination__link"><span class="page-number">12</span></a>
                                                       <a href="#" class="dm-pagination__link pagination-control"><span class="la la-angle-right"></span></a>
                                                       <a href="#" class="dm-pagination__option">
                                                       </a>
                                                   </li>
                                                   <li class="dm-pagination__item">
                                                       <div class="paging-option">
                                                           <select name="page-number" class="page-selection">
                                                               <option value="20">20/page</option>
                                                               <option value="40">40/page</option>
                                                               <option value="60">60/page</option>
                                                           </select>
                                                       </div>
                                                   </li>
                                               </ul>
                                           </nav>

                                       </div>
                                   </div>
                               </div>
                           </div>

                           <!---- Order Cart -->
                           <div class="col-4 mb-30">

                               <div class="col-12 mb-20">
                                   <div class="card card-default card-md ">
                                       <div class="card-header">
                                           <h6>Cart</h6>
                                           <button id="clearCartBtn" class="primary-button">Clear</button>
                                       </div>
                                       <div class="card-body">
                                           <div class="table-responsive">
                                               <table id="cart" class="table table-borderless table-hover">
                                                   <tbody id="cart-item">


                                                   <!--<tr>

                                                       <td>
                                                           <div class="medi a align-items-center">
                                                               <div class="media-body">
                                                                   <h5 class="mt-0">Fiber base chair</h5>
                                                                   <div class="price">$248.66</div>
                                                               </div>

                                                           </div>
                                                       </td>

                                                       <td>
                                                           <div>
                                                               &lt;!&ndash; Start: Product Quantity &ndash;&gt;
                                                               <div class="quantity product-cart__quantity justify-content-between">

                                                                   <input type="button" value="-" class="qty-minus bttn bttn-left wh-36">
                                                                   <input type="number" value="1" class="qty qh-36 input overflow-hidden">
                                                                   <input type="button" value="+" class="qty-plus bttn bttn-right wh-36">

                                                                   <button type="button" class="action-btn float-end ml">
                                                                       <i class="las la-trash-alt"></i>
                                                                   </button>
                                                               </div>
                                                               &lt;!&ndash; End: Product Quantity &ndash;&gt;

                                                           </div>
                                                       </td>

                                                   </tr>-->


                                                   </tbody>
                                                   <tfoot>

                                                   </tfoot>
                                               </table><!-- End: table -->
                                           </div>
                                       </div>
                                   </div>
                               </div>
                               <div class="col-12">
                                   <div class="card order-summery card-md">
                                       <div class="card-body">
                                           <h5 class="fw-500 mb-20">Order Summary</h5>
                                           <div class="total">
                                               <div class="subtotalTotal">
                                                   Subtotal:
                                                   <span>GHS 0.00</span>
                                               </div>
                                               <div class="taxes">
                                                   Value Added Tax (12.5%):
                                                   <span>GHS 0.00</span>
                                               </div>
                                           </div>

                                           <div class="total-money d-flex justify-content-between">
                                               <h6>Total :</h6>
                                               <h5>GHS 0.00</h5>
                                           </div>
                                           <a href="#" class="checkout btn-secondary content-center w-100 btn-lg mt-20" data-bs-toggle="modal" data-bs-target="#checkOut"> proceed to
                                               checkout<i class="las la-arrow-right"></i>
                                           </a>
                                       </div>
                                   </div>
                               </div>

                           </div>
                       </div>
                   </div>

                   <!-----Orders Section------>
                   <div class="row orders tab-pane fade" id="posTransactions" role="tabpanel" aria-labelledby="posTransactions-tab">
                       <div class="col-12 mt-30">
                           <div class="support-ticket-system support-ticket-system--search">
                               <div class="breadcrumb-main m-0 breadcrumb-main--table justify-content-sm-between">
                                   <div class="d-flex flex-wrap justify-content-center breadcrumb-main__wrapper">
                                       <div class="d-flex align-items-center ticket__title justify-content-center me-md-25 mb-md-0 mb-20">
                                           <h4 class="text-capitalize fw-500 breadcrumb-title">
                                               Transactions History
                                           </h4>
                                       </div>
                                   </div>
                                   <div class="action-btn">
                                       <!--<a href="#" class="btn btn-primary">
                                           Export
                                           <i class="las la-angle-down"></i>
                                       </a>-->
                                   </div>
                               </div>

                               <div class="support-form datatable-support-form d-flex justify-content-xxl-between justify-content-left align-items-center flex-wrap">
                                   <div class="support-form__input">
                                       <div class="d-flex flex-wrap">
                                           <div class="support-form__input-id"></div>
                                       </div>
                                   </div>
                                   <div class="support-form__search">
                                       <div class="support-order-search">
                                           <form class="support-order-search__form">
                                               <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg replaced-svg">
                                                   <circle cx="11" cy="11" r="8"></circle>
                                                   <line x1="21" y1="21" x2="16.65" y2="16.65"></line>

                                               </svg>
                                               <input class="form-control border-0 box-shadow-none" type="text" placeholder="Search" aria-label="Search" id="filterInput" onkeyup="filterTable()">
                                           </form>
                                       </div>
                                   </div>
                               </div>
                               <div class="userDatatable userDatatable--ticket userDatatable--ticket--2 mt-1">
                                   <div class="table-responsive">
                                       <table class="table mb-0 table-borderless">
                                           <thead>
                                           <tr class="userDatatable-header">
                                               <th>
                                                   <span class="userDatatable-title">ID</span>
                                               </th>
                                               <th>
                                                   <span class="userDatatable-title">Trans. ID</span>
                                               </th>
                                               <th>
                                                   <span class="userDatatable-title">Products Bought</span>
                                               </th>
                                               <th>
                                                   <span class="userDatatable-title">Qty</span>
                                               </th>
                                               <th>
                                                   <span class="userDatatable-title">Unit Price</span>
                                               </th>
                                               <th>
                                                   <span class="userDatatable-title">Trans. Date</span>
                                               </th>
                                               <th>
                                                   <span class="userDatatable-title">Sub Total</span>
                                               </th>
                                           </tr>
                                           </thead>
                                           <tbody id="transactionsTableBody">

                                       </table>
                                   </div>
                                   <div class="d-flex justify-content-end pt-30">
                                       <nav class="dm-page">
                                           <ul class="dm-pagination d-flex">
                                               <li class="dm-pagination__item">
                                                   <a href="#" class="dm-pagination__link pagination-control"><span class="la la-angle-left"></span></a>
                                                   <a href="#" class="dm-pagination__link"><span class="page-number">1</span></a>
                                                   <a href="#" class="dm-pagination__link active"><span class="page-number">2</span></a>
                                                   <a href="#" class="dm-pagination__link"><span class="page-number">3</span></a>
                                                   <a href="#" class="dm-pagination__link pagination-control"><span class="page-number">...</span></a>
                                                   <a href="#" class="dm-pagination__link"><span class="page-number">12</span></a>
                                                   <a href="#" class="dm-pagination__link pagination-control"><span class="la la-angle-right"></span></a>
                                                   <a href="#" class="dm-pagination__option"> </a>
                                               </li>
                                               <li class="dm-pagination__item">
                                                   <div class="paging-option">
                                                       <select name="page-number" class="page-selection">
                                                           <option value="20">20/page</option>
                                                           <option value="40">40/page</option>
                                                           <option value="60">60/page</option>
                                                       </select>
                                                   </div>
                                               </li>
                                           </ul>
                                       </nav>
                                   </div>
                               </div>
                           </div>
                       </div>
                   </div>

               </div>
            </div>

    </div>
    <!------ End of Main Content ---->

    <footer class="footer-wrapper">
        <div class="footer-wrapper__inside">
            <div class="container-fluid">
                <div class="row">
                    <div class="col-md-6">
                        <div class="footer-copyright">
                            <p><span>© 2023</span><a href="#">Sovware</a>
                            </p>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="footer-menu text-end">
                            <ul>
                                <li>
                                    <a href="#">About</a>
                                </li>
                                <li>
                                    <a href="#">Team</a>
                                </li>
                                <li>
                                    <a href="#">Contact</a>
                                </li>
                            </ul>
                        </div>
                        <!-- ends: .Footer Menu -->
                    </div>
                </div>
            </div>
        </div>
    </footer>
    </div>
</main>
<!--  End of Main Content  -->
<div id="overlayer">
    <div class="loader-overlay">
        <div class="dm-spin-dots spin-lg">
            <span class="spin-dot badge-dot dot-primary"></span>
            <span class="spin-dot badge-dot dot-primary"></span>
            <span class="spin-dot badge-dot dot-primary"></span>
            <span class="spin-dot badge-dot dot-primary"></span>
        </div>
    </div>
</div>
<div class="overlay-dark-sidebar"></div>
<div class="customizer-overlay"></div>

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

<!--Start In-Page Modals-->

<!-- Start Checkout Transaction Modal -->
<div class="modal fade" id="checkOut" tabindex="-1" role="dialog" aria-labelledby="updateProductModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-md" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="updateProductModalLabel">Complete Transaction</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>

                <div class="modal-body">

                </div>
                <div class="modal-footer">
                    <button type="submit" id="completeTransaction" class="btn btn-primary btn-sm">Finish</button>
                    <button type="button" class="btn btn-secondary btn-sm" data-bs-dismiss="modal">Cancel</button>
                </div>

        </div>
    </div>
</div>
<!-- End Checkout Transaction -->

<!--End In-Page Modals-->


<!--Start In-Page Scripts-->
<!--<script>
    $(document).ready(function() {
        // Initialize counter
        let counter = 1;

        // Fetch products from the server and populate the product table
        fetchProducts(counter);
    });

    function fetchProducts(counter) {
        $.get("/products")
            .done(function(products) {
                // Clear existing table rows
                $("#posProductTableBody").empty();

                // Iterate over products and add rows to the table
                products.forEach(function(product) {
                    var row = `
                        <tr>
                            <td>${counter++}</td>
                            <td>${product.name}</td>
                            <td>${product.quantityInStock}</td>
                            <td>${product.sellingPrice}</td>
                            <td>${product.categoryId}</td>
                            <td>
                                <a href="#" class="edit" onclick="addToCart('${product.id}', '${product.name}', ${product.sellingPrice})">Add</a>
                            </td>
                            &lt;!&ndash; Hidden cell for product ID &ndash;&gt;
                            <td style="display: none;">${product.id}</td>
                        </tr>`;
                    $("#posProductTableBody").append(row);
                });
            })
            .fail(function(xhr, status, error) {
                console.error("Failed to fetch products:", error);
            });
    }

    // Search Function to Filter Product(s) on the Products Table
    // Function to filter products based on search keyword
    function filterProducts() {
        var input, filter, table, tr, td, i, txtValue;
        input = document.getElementById("searchInput");
        filter = input.value.toUpperCase();
        table = document.getElementById("posProductTableBody");
        tr = table.getElementsByTagName("tr");

        for (i = 0; i < tr.length; i++) {
            td = tr[i].getElementsByTagName("td")[1]; // Change index if product name is in different column
            if (td) {
                txtValue = td.textContent || td.innerText;
                if (txtValue.toUpperCase().indexOf(filter) > -1) {
                    tr[i].style.display = "";
                } else {
                    tr[i].style.display = "none";
                }
            }
        }
    }

    // Add event listener to the search input field
    document.getElementById("searchInput").addEventListener("keyup", filterProducts);


    // Script to add to Cart, Delete Item and Clear Cart
    // Array to store cart items
    let cartItems = [];

    // Event listener for Add button in product table
    $(document).on('click', '.edit', function() {
        let $row = $(this).closest('tr');
        let productId = $row.find('td:last-child').text();
        let productName = $row.find('td:eq(1)').text();
        let price = parseFloat($row.find('td:eq(3)').text());
        let quantity = parseInt($row.find('td:eq(2)').text());

        // Check if item already exists in cart
        let existingItem = cartItems.find(item => item.productId === productId);
        if (existingItem) {
            // Increment quantity if item already exists
            existingItem.quantity++;
            updateCartItem(existingItem);
        } else {
            // Add new item to cart
            let newItem = {
                productId: productId,
                productName: productName,
                price: price,
                quantity: 1
            };
            cartItems.push(newItem);
            addCartItem(newItem);
        }
    });

    // Function to add cart item to the table
    function addCartItem(item) {

        let $cartBody = $('#cart-item');
        let total = item.price * item.quantity;
        let row = `
            <tr data-id="${item.productId}">
                <td>${item.productName}</td>
                <td>${item.price.toFixed(2)}</td>
                <td>
                    <div class="quantity product-cart__quantity">
                        <input type="button" class="qty-minus bttn bttn-left wh-36" data-id="${item.productId}" value="-">
                        <input type="number" value="${item.quantity}" class="qty qh-36 input">
                        <input type="button" class="qty-plus bttn bttn-left wh-36" data-id="${item.productId}" value="+">
                    </div>
                </td>
                <td class="total subtotal">${total.toFixed(2)}</td>
                <td style="background:none; outline:none; border:none;"><button class="delete action-btn float-end" data-id="${item.productId}"><i class="las la-trash-alt"></i></button></td>
            </tr>`;
        $cartBody.append(row);
        updateTotal();

    }

    // Event listener for Clear button
    $('#clearCartBtn').click(function() {
        $('#cart-item').empty();
        cartItems = [];
        updateTotal();
    });

    // Event listener for Delete button
    $(document).on('click', '.delete', function() {
        let productId = $(this).data('id');
        $(`#cart-item tr[data-id="${productId}"]`).remove();
        cartItems = cartItems.filter(item => item.productId !== productId);
        updateTotal();
    });

    // Event listener for Quantity +/- buttons
    $(document).on('click', '.qty-minus, .qty-plus', function(event) {
        // prevent default bindings
        event.preventDefault();

        let productId = $(this).data('id');
        let $qtyInput = $(this).siblings('.qty');
        let quantity = parseInt($qtyInput.val());

        if ($(this).hasClass('qty-minus')) {
            quantity = Math.max(quantity - 1, 1);
        } else {
            quantity = Math.min(quantity + 1, item.quantityInStock); // Limit quantity by quantityInStock
        }

        $qtyInput.val(quantity);
        let item = cartItems.find(item => item.productId === productId);
        if (item) {
            item.quantity = quantity;
            updateCartItem(item);
        }
    });

    // Function to update cart item in the table
    function updateCartItem(item) {
        let $row = $(`#cart-item tr[data-id="${item.productId}"]`);
        let total = item.price * item.quantity;
        $row.find('.qty').val(item.quantity);
        $row.find('.total').text(total.toFixed(2));
        updateTotal();
    }



// -&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;
    // Function to update the order summary based on cart items
function updateTotal() {
    let subtotal = 0;
    cartItems.forEach(item => {
        subtotal += item.price * item.quantity;
    });

    // Calculate taxes (assuming fixed tax rate for now)
    let taxRate = 0.125; // 12.5%
    let taxes = subtotal * taxRate;

    // Calculate total
    let total = subtotal + taxes;

    // Update the HTML elements with the calculated values
    $('.subtotalTotal span').text(`GHS ${subtotal.toFixed(2)}`);
    $('.taxes span').text(`GHS ${taxes.toFixed(2)}`);
    $('.total-money h5').text(`GHS ${total.toFixed(2)}`);
}

// Call the updateOrderSummary function whenever the cart items are updated
updateTotal();
// &#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;



    // Start Script for Proceed to Checkout

    // Event listener for the "proceed to checkout" button
    $('.checkout').click(function() {
        // Open the checkout modal
        $('#checkOut').modal('show');

        // Populate the modal with items and summary
        populateCheckoutModal();
    });

    // Function to populate the checkout modal with items and summary
function populateCheckoutModal() {
    // Clear existing content in the modal body
    $('.modal-body').empty();

    // Append items to the modal body
    cartItems.forEach(function(item) {
        let itemHtml = `
            <div>${item.productName} - Quantity: ${item.quantity} - Price: GHS ${item.price.toFixed(2)}</div>`;
        $('.modal-body').append(itemHtml);
    });

    // Append summary to the modal body
    let subtotal = calculateSubtotal();
    //let discount = calculateDiscount();
    let taxes = calculateTaxes();
    let total = subtotal - discount + taxes;
    let summaryHtml = `
        <div>Subtotal: GHS ${subtotal.toFixed(2)}</div>
        <div>Discount: GHS ${discount.toFixed(2)}</div>
        <div>Taxes: GHS ${taxes.toFixed(2)}</div>
        <div>Total: GHS ${total.toFixed(2)}</div>`;
    $('.modal-body').append(summaryHtml);
}

    // Function to populate the checkout modal with items and summary
function populateCheckoutModal() {
    // Clear existing content in the modal body
    $('.modal-body').empty();

    // Append items to the modal body
    cartItems.forEach(function(item) {
        let itemHtml = `
            <div>${item.productName} - Quantity: ${item.quantity} - Price: GHS ${item.price.toFixed(2)}</div>`;
        $('.modal-body').append(itemHtml);
    });

    // Append summary to the modal body
    //let subtotal = calculateSubtotal();
    //let discount = calculateDiscount();
    let taxes = calculateTaxes();
    //let total = subtotal - discount + taxes;
    let summaryHtml = `

    `;
    $('.modal-body').append(summaryHtml);
}

    // Function to calculate taxes based on subtotal
function calculateTaxes(subtotal) {
    // Implement your taxes calculation logic here
    let taxRate = 0.125;
    let taxes = taxRate * subtotal;
    return taxes;
}



// Start Submit Request to Backend

// Event listener for the "finish" button in the checkout modal
$('#completeTransaction').click(function() {
    // Submit the transaction to the backend
    submitTransaction();
    // Close the modal
    $('#checkOut').modal('hide');

});

function submitTransaction() {
    // Prepare the data to be sent in the request body
    let items = cartItems.map(item => ({
        id: item.productId,
        quantity: item.quantity
    }));

    // Make an AJAX POST request to the backend endpoint
    $.ajax({
        url: "/pos/posTransaction",
        type: "POST",
        contentType: "application/json",
        data: JSON.stringify(items),
        success: function(response) {
            // Handle successful response from the backend
            console.log("Transaction successful:", response);
            // Clear the cart and update the UI as needed
            $('#cart-item').empty();
            cartItems = [];
            updateTotal();

             // Fetch updated products after successful transaction
            fetchProducts(1);
        },
        error: function(xhr, status, error) {
            // Handle errors from the backend
            console.error("Error occurred during transaction:", error);
            // Optionally, display an error message to the user
        }
    });

}

// End Submit Request to Backend

    // End Script for Proceed to Checkout
</script>-->
<!--End In-Page Scripts-->


<!--test script-->
<!--script one-->
<!--<script>
$(document).ready(function() {
// Initialize counter
let counter = 1;

// Fetch products from the server and populate the product table
fetchProducts(counter);
});

function fetchProducts(counter) {
$.get("/products")
.done(function(products) {
// Clear existing table rows
$("#posProductTableBody").empty();

// Iterate over products and add rows to the table
products.forEach(function(product) {
var row = `
<tr>
    <td>${counter++}</td>
    <td>${product.name}</td>
    <td>${product.quantityInStock}</td>
    <td>${product.sellingPrice}</td>
    <td>${product.categoryId}</td>
    <td>
        <a href="#" class="edit" onclick="addToCart('${product.id}', '${product.name}', ${product.sellingPrice})">Add</a>
    </td>
    &lt;!&ndash; Hidden cell for product ID &ndash;&gt;
    <td style="display: none;">${product.id}</td>
</tr>`;
$("#posProductTableBody").append(row);
});
})
.fail(function(xhr, status, error) {
console.error("Failed to fetch products:", error);
});
}

// Search Function to Filter Product(s) on the Products Table
// Function to filter products based on search keyword
function filterProducts() {
var input, filter, table, tr, td, i, txtValue;
input = document.getElementById("searchInput");
filter = input.value.toUpperCase();
table = document.getElementById("posProductTableBody");
tr = table.getElementsByTagName("tr");

for (i = 0; i < tr.length; i++) {
td = tr[i].getElementsByTagName("td")[1]; // Change index if product name is in different column
if (td) {
txtValue = td.textContent || td.innerText;
if (txtValue.toUpperCase().indexOf(filter) > -1) {
tr[i].style.display = "";
} else {
tr[i].style.display = "none";
}
}
}
}

// Add event listener to the search input field
document.getElementById("searchInput").addEventListener("keyup", filterProducts);

// Array to store cart items
let cartItems = [];

// Event listener for Add button in product table
$(document).on('click', '.edit', function() {
let $row = $(this).closest('tr');
let productId = $row.find('td:last-child').text();
let productName = $row.find('td:eq(1)').text();
let price = parseFloat($row.find('td:eq(3)').text());
let quantity = parseInt($row.find('td:eq(2)').text());

// Check if item is in stock
  if (quantity === 0) {
     alert(`${productName} is out of stock. Please restock.`);
     return; // Exit function
  }

// Check if item already exists in cart
let existingItem = cartItems.find(item => item.productId === productId);
if (existingItem) {
// Increment quantity if item already exists
existingItem.quantity++;
updateCartItem(existingItem);
} else {
// Add new item to cart
let newItem = {
productId: productId,
productName: productName,
price: price,
quantity: 1
};
cartItems.push(newItem);
addCartItem(newItem);
}
});

// Function to add cart item to the table
function addCartItem(item) {

let $cartBody = $('#cart-item');
let total = item.price * item.quantity;
let row = `
<tr data-id="${item.productId}">
    <td>${item.productName}</td>
    <td>${item.price.toFixed(2)}</td>
    <td>
        <div class="quantity product-cart__quantity">
            <input type="button" class="qty-minus bttn bttn-left wh-36" data-id="${item.productId}" value="-">
            <input type="number" value="${item.quantity}" class="qty qh-36 input">
            <input type="button" class="qty-plus bttn bttn-left wh-36" data-id="${item.productId}" value="+">
        </div>
    </td>
    <td class="total subtotal">${total.toFixed(2)}</td>
    <td style="background:none; outline:none; border:none;"><button class="delete action-btn float-end" data-id="${item.productId}"><i class="las la-trash-alt"></i></button></td>
</tr>`;
$cartBody.append(row);
updateTotal();

}

// Event listener for Delete button
$(document).on('click', '.delete', function() {
let productId = $(this).data('id');
$(`#cart-item tr[data-id="${productId}"]`).remove();
cartItems = cartItems.filter(item => item.productId !== productId);
updateTotal();
});

// Event listener for Quantity +/- buttons
$(document).on('click', '.qty-minus, .qty-plus', function(event) {
event.preventDefault();

let productId = $(this).data('id');
let $qtyInput = $(this).siblings('.qty');
let quantity = parseInt($qtyInput.val());
let item = cartItems.find(item => item.productId === productId);

if ($(this).hasClass('qty-minus')) {
    quantity = Math.max(quantity - 1, 0); // Adjusted to remove item if quantity is 0
} else {
    quantity = Math.min(quantity + 1, item.quantityInStock);
}

// Update quantity input field
$qtyInput.val(quantity);

// Update cart item
let updatedItem = cartItems.find(item => item.productId === productId);
if (updatedItem) {
updatedItem.quantity = quantity;
    if (quantity === 0) {
        removeCartItem(productId); // Remove item if quantity is 0
    } else {
        updateCartItem(updatedItem);
    }
}

});

// Function to remove cart item from the table
function removeCartItem(productId) {
/**$(`#cart-item tr[data-id="${productId}"]`).remove();
cartItems = cartItems.filter(item => item.productId !== productId);
updateTotal();**/

let updatedItem = cartItems.find(item => item.productId === productId);
  if (updatedItem.quantity === 0) {
    $(`#cart-item tr[data-id="${productId}"]`).remove();
    cartItems = cartItems.filter(item => item.productId !== productId);
    updateTotal();
  }
}

// Function to update cart item in the table
function updateCartItem(item) {
    let $row = $(`#cart-item tr[data-id="${item.productId}"]`);
    let total = item.price * item.quantity;

    // Check if the quantity is a valid number
    let quantity = parseFloat($row.find('.qty').val()) || 1;
    $row.find('.qty').val(item.quantity);

    // Update the total
    $row.find('.total').text(total.toFixed(2));
    updateTotal();

  // Renamed 'item' to 'updatedItem'
  let updatedItem = cartItems.find(cartItem => cartItem.productId === item.productId);
  if (updatedItem) {
   // updatedItem.quantity = item.quantity;
   // updateTotal();

   if (quantity === 0) {
      removeCartItem(productId); // Remove item if quantity is 0
    } else {
      updateCartItem(updatedItem);
    }
}

}

// Function to ensure quantity input field accepts only numeric values
$(document).on('input', '.qty', function() {
    // Remove non-numeric characters from input
    $(this).val($(this).val().replace(/\D/, ''));

    // Get updated quantity and product ID
    let quantity = parseInt($(this).val());
    let productId = $(this).closest('tr').data('id');

    // Update cart item
    let updatedItem = cartItems.find(item => item.productId === productId);
    if (updatedItem) {
        updatedItem.quantity = quantity;
        if (quantity === 0) {
            removeCartItem(productId); // Remove item if quantity is 0
        } else {
            updateCartItem(item);
        }
    }
});

// Function to update the order summary based on cart items
function updateTotal() {
let subtotal = 0;
cartItems.forEach(item => {
subtotal += item.price * item.quantity;
});

// Calculate taxes (assuming fixed tax rate for now)
let taxRate = 0.125; // 12.5%
let taxes = subtotal * taxRate;

// Calculate total
let total = subtotal + taxes;

// Update the HTML elements with the calculated values
$('.subtotalTotal span').text(`GHS ${subtotal.toFixed(2)}`);
$('.taxes span').text(`GHS ${taxes.toFixed(2)}`);
$('.total-money h5').text(`GHS ${total.toFixed(2)}`);
}

// Call the updateOrderSummary function whenever the cart items are updated
updateTotal();

// Start Script for Proceed to Checkout

// Event listener for the "proceed to checkout" button
$('.checkout').click(function() {
// Open the checkout modal
$('#checkOut').modal('show');

// Populate the modal with items and summary
populateCheckoutModal();
});

// Function to populate the checkout modal with items and summary
function populateCheckoutModal() {
// Clear existing content in the modal body
$('.modal-body').empty();

// Append items to the modal body
cartItems.forEach(function(item) {
let itemHtml = `
<div>${item.productName} - Quantity: ${item.quantity} - Price: GHS ${item.price.toFixed(2)}</div>`;
$('.modal-body').append(itemHtml);
});

// Append summary to the modal body
let subtotal = calculateSubtotal();
//let discount = calculateDiscount();
let taxes = calculateTaxes();
//let total = subtotal - discount + taxes;
let summaryHtml = `
`;
$('.modal-body').append(summaryHtml);
}

// Function to calculate taxes based on subtotal
function calculateTaxes(subtotal) {
// Implement your taxes calculation logic here
let taxRate = 0.125;
let taxes = taxRate * subtotal;
return taxes;
}

// Start Submit Request to Backend

// Event listener for the "finish" button in the checkout modal
$('#completeTransaction').click(function() {
// Submit the transaction to the backend
submitTransaction();
// Close the modal
$('#checkOut').modal('hide');

});

function submitTransaction() {
// Prepare the data to be sent in the request body
let items = cartItems.map(item => ({
id: item.productId,
quantity: item.quantity
}));

// Make an AJAX POST request to the backend endpoint
$.ajax({
url: "/pos/posTransaction",
type: "POST",
contentType: "application/json",
data: JSON.stringify(items),
success: function(response) {
// Handle successful response from the backend
console.log("Transaction successful:", response);
// Clear the cart and update the UI as needed
$('#cart-item').empty();
cartItems = [];
updateTotal();

// Fetch updated products after successful transaction
fetchProducts(1);
},
error: function(xhr, status, error) {
// Handle errors from the backend
console.error("Error occurred during transaction:", error);
// Optionally, display an error message to the user
}
});

}

// End Submit Request to Backend

// End Script for Proceed to Checkout
</script>-->

<!--Script two-->
<!--<script>
    $(document).ready(function() {
        // Initialize counter
        let counter = 1;

        // Fetch products from the server and populate the product table
        fetchProducts(counter);
    });

    function fetchProducts(counter) {
        $.get("/products")
            .done(function(products) {
                // Clear existing table rows
                $("#posProductTableBody").empty();

                // Iterate over products and add rows to the table
                products.forEach(function(product) {
                    var row = `
                    <tr>
                        <td>${counter++}</td>
                        <td>${product.name}</td>
                        <td>${product.quantityInStock}</td>
                        <td>${product.sellingPrice}</td>
                        <td>${product.categoryId}</td>
                        <td>
                            <a href="#" class="edit" onclick="addToCart('${product.id}', '${product.name}', ${product.sellingPrice})">Add</a>
                        </td>
                        &lt;!&ndash; Hidden cell for product ID &ndash;&gt;
                        <td style="display: none;">${product.id}</td>
                    </tr>`;
                    $("#posProductTableBody").append(row);
                });
            })
            .fail(function(xhr, status, error) {
                console.error("Failed to fetch products:", error);
            });
    }

    // Search Function to Filter Product(s) on the Products Table
    // Function to filter products based on search keyword
    function filterProducts() {
        var input, filter, table, tr, td, i, txtValue;
        input = document.getElementById("searchInput");
        filter = input.value.toUpperCase();
        table = document.getElementById("posProductTableBody");
        tr = table.getElementsByTagName("tr");

        for (i = 0; i < tr.length; i++) {
            td = tr[i].getElementsByTagName("td")[1]; // Change index if product name is in different column
            if (td) {
                txtValue = td.textContent || td.innerText;
                if (txtValue.toUpperCase().indexOf(filter) > -1) {
                    tr[i].style.display = "";
                } else {
                    tr[i].style.display = "none";
                }
            }
        }
    }

    // Add event listener to the search input field
    document.getElementById("searchInput").addEventListener("keyup", filterProducts);

    // Array to store cart items
    let cartItems = [];

    // Event listener for Add button in product table
    $(document).on('click', '.edit', function() {
        let $row = $(this).closest('tr');
        let productId = $row.find('td:last-child').text();
        let productName = $row.find('td:eq(1)').text();
        let price = parseFloat($row.find('td:eq(3)').text());
        let quantity = parseInt($row.find('td:eq(2)').text());

        // Check if item is in stock
        if (quantity === 0) {
            alert(`${productName} is out of stock. Please restock.`);
            return; // Exit function
        }

        // Check if item already exists in cart
        let existingItem = cartItems.find(item => item.productId === productId);
        if (existingItem) {
            // Increment quantity if item already exists
            existingItem.quantity++;
            updateCartItem(existingItem);
        } else {
            // Add new item to cart
            let newItem = {
                productId: productId,
                productName: productName,
                price: price,
                quantity: 1
            };
            cartItems.push(newItem);
            addCartItem(newItem);
        }
    });

    // Function to add cart item to the table
    function addCartItem(item) {

        let $cartBody = $('#cart-item');
        let total = item.price * item.quantity;
        let row = `
        <tr data-id="${item.productId}">
            <td>${item.productName}</td>
            <td>${item.price.toFixed(2)}</td>
            <td>
                <div class="quantity product-cart__quantity">
                    <input type="button" class="qty-minus bttn bttn-left wh-36" data-id="${item.productId}" value="-">
                    <input type="number" value="${item.quantity}" class="qty qh-36 input">
                    <input type="button" class="qty-plus bttn bttn-left wh-36" data-id="${item.productId}" value="+">
                </div>
            </td>
            <td class="total subtotal">${total.toFixed(2)}</td>
            <td style="background:none; outline:none; border:none;"><button class="delete action-btn float-end" data-id="${item.productId}"><i class="las la-trash-alt"></i></button></td>
        </tr>`;
        $cartBody.append(row);
        updateTotal();

    }

    // Event listener for Delete button
    $(document).on('click', '.delete', function() {
        let productId = $(this).data('id');
        $(`#cart-item tr[data-id="${productId}"]`).remove();
        cartItems = cartItems.filter(item => item.productId !== productId);
        updateTotal();
    });

    // Event listener for Quantity +/- buttons
    $(document).on('click', '.qty-minus, .qty-plus', function(event) {
        event.preventDefault();

        let productId = $(this).data('id');
        let $qtyInput = $(this).siblings('.qty');
        let quantity = parseInt($qtyInput.val());
        let item = cartItems.find(item => item.productId === productId);

        if ($(this).hasClass('qty-minus')) {
            quantity = Math.max(quantity - 1, 0); // Adjusted to remove item if quantity is 0
        } else {
            quantity = Math.min(quantity + 1, item.quantityInStock);
        }

        // Update quantity input field
        $qtyInput.val(quantity);

        // Update cart item
        let updatedItem = cartItems.find(item => item.productId === productId);
        if (updatedItem) {
            updatedItem.quantity = quantity;
            if (quantity === 0) {
                removeCartItem(productId); // Remove item if quantity is 0
            } else {
                updateCartItem(updatedItem);
            }
        }
    });

    // Function to remove cart item from the table
    function removeCartItem(productId) {
        let updatedItem = cartItems.find(item => item.productId === productId);
        if (updatedItem.quantity === 0) {
            $(`#cart-item tr[data-id="${productId}"]`).remove();
            cartItems = cartItems.filter(item => item.productId !== productId);
            updateTotal();
        }
    }

    // Function to update cart item in the table
    function updateCartItem(item) {
        let $row = $(`#cart-item tr[data-id="${item.productId}"]`);
        let total = item.price * item.quantity;
        $row.find('.qty').val(item.quantity);
        $row.find('.total').text(total.toFixed(2));
        updateTotal();
    }

    // Function to ensure quantity input field accepts only numeric values
    $(document).on('input', '.qty', function() {
        $(this).val($(this).val().replace(/\D/, ''));
        let quantity = parseInt($(this).val());
        let productId = $(this).closest('tr').data('id');
        let updatedItem = cartItems.find(item => item.productId === productId);
        if (updatedItem) {
            updatedItem.quantity = quantity;
            if (quantity === 0) {
                removeCartItem(productId); // Remove item if quantity is 0
            } else {
                updateCartItem(updatedItem);
            }
        }
    });

    // Function to update the order summary based on cart items
    function updateTotal() {
        let subtotal = 0;
        cartItems.forEach(item => {
            subtotal += item.price * item.quantity;
        });

        // Calculate taxes (assuming fixed tax rate for now)
        let taxRate = 0.125; // 12.5%
        let taxes = subtotal * taxRate;

        // Calculate total
        let total = subtotal + taxes;

        // Update the HTML elements with the calculated values
        $('.subtotalTotal span').text(`GHS ${subtotal.toFixed(2)}`);
        $('.taxes span').text(`GHS ${taxes.toFixed(2)}`);
        $('.total-money h5').text(`GHS ${total.toFixed(2)}`);
    }

    // Call the updateOrderSummary function whenever the cart items are updated
    updateTotal();

    // Start Script for Proceed to Checkout

    // Event listener for the "proceed to checkout" button
    $('.checkout').click(function() {
        // Open the checkout modal
        $('#checkOut').modal('show');

        // Populate the modal with items and summary
        populateCheckoutModal();
    });

    // Function to populate the checkout modal with items and summary
    function populateCheckoutModal() {
        // Clear existing content in the modal body
        $('.modal-body').empty();

        // Append items to the modal body
        cartItems.forEach(function(item) {
            let itemHtml = `
            <div>${item.productName} - Quantity: ${item.quantity} - Price: GHS ${item.price.toFixed(2)}</div>`;
            $('.modal-body').append(itemHtml);
        });

        // Append summary to the modal body
        let subtotal = calculateSubtotal();
        //let discount = calculateDiscount();
        let taxes = calculateTaxes();
        //let total = subtotal - discount + taxes;
        let summaryHtml = `
        `;
        $('.modal-body').append(summaryHtml);
    }

    // Function to calculate taxes based on subtotal
    function calculateTaxes(subtotal) {
        // Implement your taxes calculation logic here
        let taxRate = 0.125;
        let taxes = taxRate * subtotal;
        return taxes;
    }

    // Start Submit Request to Backend

    // Event listener for the "finish" button in the checkout modal
    $('#completeTransaction').click(function() {
        // Submit the transaction to the backend
        submitTransaction();
        // Close the modal
        $('#checkOut').modal('hide');

    });

    function submitTransaction() {
        // Prepare the data to be sent in the request body
        let items = cartItems.map(item => ({
            id: item.productId,
            quantity: item.quantity
        }));

        // Make an AJAX POST request to the backend endpoint
        $.ajax({
            url: "/pos/posTransaction",
            type: "POST",
            contentType: "application/json",
            data: JSON.stringify(items),
            success: function(response) {
                // Handle successful response from the backend
                console.log("Transaction successful:", response);
                // Clear the cart and update the UI as needed
                $('#cart-item').empty();
                cartItems = [];
                updateTotal();

                // Fetch updated products after successful transaction
                fetchProducts(1);
            },
            error: function(xhr, status, error) {
                // Handle errors from the backend
                console.error("Error occurred during transaction:", error);
                // Optionally, display an error message to the user
            }
        });

    }

    // End Submit Request to Backend

    // End Script for Proceed to Checkout
</script>-->

<!---->

<!--Functionality Script Injection-->




<script src="/scripts/pos_script.js"></script>

<script src="http://maps.googleapis.com/maps/api/js?key=AIzaSyBgYKHZB_QKKLWfIRaYPCadza3nhTAbv7c"></script>
<!-- inject:js-->
<script src="assets/vendor_assets/js/jquery/jquery-3.5.1.min.js"></script>
<script src="assets/vendor_assets/js/jquery/jquery-ui.js"></script>
<script src="assets/vendor_assets/js/bootstrap/popper.js"></script>
<script src="assets/vendor_assets/js/bootstrap/bootstrap.min.js"></script>
<script src="assets/vendor_assets/js/moment/moment.min.js"></script>
<script src="assets/vendor_assets/js/accordion.js"></script>
<script src="assets/vendor_assets/js/apexcharts.min.js"></script>
<script src="assets/vendor_assets/js/autoComplete.js"></script>
<script src="assets/vendor_assets/js/Chart.min.js"></script>
<script src="assets/vendor_assets/js/daterangepicker.js"></script>
<script src="assets/vendor_assets/js/drawer.js"></script>
<script src="assets/vendor_assets/js/dynamicBadge.js"></script>
<script src="assets/vendor_assets/js/dynamicCheckbox.js"></script>
<script src="assets/vendor_assets/js/footable.min.js"></script>
<script src="assets/vendor_assets/js/fullcalendar@5.2.0.js"></script>
<script src="assets/vendor_assets/js/google-chart.js"></script>
<script src="assets/vendor_assets/js/jquery-jvectormap-2.0.5.min.js"></script>
<script src="assets/vendor_assets/js/jquery-jvectormap-world-mill-en.js"></script>
<script src="assets/vendor_assets/js/jquery.countdown.min.js"></script>
<script src="assets/vendor_assets/js/jquery.filterizr.min.js"></script>
<script src="assets/vendor_assets/js/jquery.magnific-popup.min.js"></script>
<script src="assets/vendor_assets/js/jquery.peity.min.js"></script>
<script src="assets/vendor_assets/js/jquery.star-rating-svg.min.js"></script>
<script src="assets/vendor_assets/js/leaflet.js"></script>
<script src="assets/vendor_assets/js/leaflet.markercluster.js"></script>
<script src="assets/vendor_assets/js/loader.js"></script>
<script src="assets/vendor_assets/js/message.js"></script>
<script src="assets/vendor_assets/js/moment.js"></script>
<script src="assets/vendor_assets/js/muuri.min.js"></script>
<script src="assets/vendor_assets/js/notification.js"></script>
<script src="assets/vendor_assets/js/popover.js"></script>
<script src="assets/vendor_assets/js/select2.full.min.js"></script>
<script src="assets/vendor_assets/js/slick.min.js"></script>
<script src="assets/vendor_assets/js/trumbowyg.min.js"></script>
<script src="assets/vendor_assets/js/wickedpicker.min.js"></script>
<script src="assets/theme_assets/js/apexmain.js"></script>
<script src="assets/theme_assets/js/charts.js"></script>
<script src="assets/theme_assets/js/drag-drop.js"></script>
<script src="assets/theme_assets/js/footable.js"></script>
<script src="assets/theme_assets/js/full-calendar.js"></script>
<script src="assets/theme_assets/js/googlemap-init.js"></script>
<script src="assets/theme_assets/js/icon-loader.js"></script>
<script src="assets/theme_assets/js/jvectormap-init.js"></script>
<script src="assets/theme_assets/js/leaflet-init.js"></script>
<script src="assets/theme_assets/js/main.js"></script>
<!-- endinject-->
</body>

</html>